{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "89c609ca_8f005835",
        "filename": "adb.cpp",
        "patchSetId": 3
      },
      "lineNbr": 835,
      "author": {
        "id": 1579231
      },
      "writtenOn": "2022-04-25T20:44:41Z",
      "side": 1,
      "message": "Sounds like \n\\ProgramData appears to be a good location to consolidate application data, but - is C:\\ProgramData guaranteed to exist? If the C:\\ drive does not exist, is there a fallback?",
      "range": {
        "startLine": 835,
        "startChar": 39,
        "endLine": 835,
        "endChar": 85
      },
      "revId": "3266bf518d622ca3224fd7296e9c2ed0f7103173",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f103a729_b6e69805",
        "filename": "adb.cpp",
        "patchSetId": 3
      },
      "lineNbr": 835,
      "author": {
        "id": 1943050
      },
      "writtenOn": "2022-04-25T21:10:47Z",
      "side": 1,
      "message": "the programdata folder is guaranteed to exist, however i should be using the CSIDL_COMMON_APPDATA environmental variable instead of manually putting in C:\\ProgramData for cases where windows is not installed on the C drive, the program data folder is created by windows during installation",
      "parentUuid": "89c609ca_8f005835",
      "range": {
        "startLine": 835,
        "startChar": 39,
        "endLine": 835,
        "endChar": 85
      },
      "revId": "3266bf518d622ca3224fd7296e9c2ed0f7103173",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a8fa1dd9_c7311d07",
        "filename": "adb.cpp",
        "patchSetId": 3
      },
      "lineNbr": 835,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2022-04-25T21:24:17Z",
      "side": 1,
      "message": "yeah, look at the existing code for dealing with keys: you want  adb_get_android_dir_path() instead of this.",
      "parentUuid": "f103a729_b6e69805",
      "range": {
        "startLine": 835,
        "startChar": 39,
        "endLine": 835,
        "endChar": 85
      },
      "revId": "3266bf518d622ca3224fd7296e9c2ed0f7103173",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9303afb3_19cdba4a",
        "filename": "adb.cpp",
        "patchSetId": 3
      },
      "lineNbr": 835,
      "author": {
        "id": 1943050
      },
      "writtenOn": "2022-04-25T21:53:06Z",
      "side": 1,
      "message": "adb_get_android_dir_path gets the user directory what we want to do is that a system can dictate whether the --one-device option is required for all users of that system so there is no accidental usage of starting a server without --one-device",
      "parentUuid": "a8fa1dd9_c7311d07",
      "range": {
        "startLine": 835,
        "startChar": 39,
        "endLine": 835,
        "endChar": 85
      },
      "revId": "3266bf518d622ca3224fd7296e9c2ed0f7103173",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b5301613_64b01972",
        "filename": "adb.cpp",
        "patchSetId": 3
      },
      "lineNbr": 835,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2022-04-25T22:06:25Z",
      "side": 1,
      "message": "hmm... does this even make sense on Windows? YAGNI and remove the Windows codepath?",
      "parentUuid": "9303afb3_19cdba4a",
      "range": {
        "startLine": 835,
        "startChar": 39,
        "endLine": 835,
        "endChar": 85
      },
      "revId": "3266bf518d622ca3224fd7296e9c2ed0f7103173",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7761fd5f_7f2dedd7",
        "filename": "adb.cpp",
        "patchSetId": 3
      },
      "lineNbr": 835,
      "author": {
        "id": 1943050
      },
      "writtenOn": "2022-04-25T23:02:07Z",
      "side": 1,
      "message": "while we dont forsee any windows system ever using this particular feature we cant rule out that some organization out there is using a windows setup that would use this",
      "parentUuid": "b5301613_64b01972",
      "range": {
        "startLine": 835,
        "startChar": 39,
        "endLine": 835,
        "endChar": 85
      },
      "revId": "3266bf518d622ca3224fd7296e9c2ed0f7103173",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "20d54b36_73ad980b",
        "filename": "adb.cpp",
        "patchSetId": 3
      },
      "lineNbr": 835,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2022-04-25T23:40:37Z",
      "side": 1,
      "message": "sure, but we can decide whether we want to _support_ that or not. and given that the correct fix here is non-obvious (and what we have now is clearly wrong), i\u0027m leaning towards \"not supported\" :-)",
      "parentUuid": "7761fd5f_7f2dedd7",
      "range": {
        "startLine": 835,
        "startChar": 39,
        "endLine": 835,
        "endChar": 85
      },
      "revId": "3266bf518d622ca3224fd7296e9c2ed0f7103173",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8c31496a_3633e467",
        "filename": "adb.cpp",
        "patchSetId": 3
      },
      "lineNbr": 998,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2022-04-25T21:24:17Z",
      "side": 1,
      "message": "todo :-)",
      "revId": "3266bf518d622ca3224fd7296e9c2ed0f7103173",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9462ccb4_8c74edc4",
        "filename": "adb.cpp",
        "patchSetId": 3
      },
      "lineNbr": 1029,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2022-04-25T21:24:17Z",
      "side": 1,
      "message": "i\u0027d either move the two paths _inside_ this function or (more likely) just inline this one-liner in the two places it\u0027s used.",
      "range": {
        "startLine": 1029,
        "startChar": 5,
        "endLine": 1029,
        "endChar": 27
      },
      "revId": "3266bf518d622ca3224fd7296e9c2ed0f7103173",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6fceeced_1852eed7",
        "filename": "adb_utils.cpp",
        "patchSetId": 3
      },
      "lineNbr": 84,
      "author": {
        "id": 1579231
      },
      "writtenOn": "2022-04-25T20:44:41Z",
      "side": 1,
      "message": "Files and directories are very similar - consider combining the two functions - perhaps with an extra (default) param?",
      "range": {
        "startLine": 76,
        "startChar": 0,
        "endLine": 84,
        "endChar": 1
      },
      "revId": "3266bf518d622ca3224fd7296e9c2ed0f7103173",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "25db4e9f_6fbd974b",
        "filename": "adb_utils.cpp",
        "patchSetId": 3
      },
      "lineNbr": 84,
      "author": {
        "id": 1943050
      },
      "writtenOn": "2022-04-25T21:10:47Z",
      "side": 1,
      "message": "hmm i am certainly open to doing this, do you want me to adjust everywhere directory_exists is called as well to use the new method of file_exists(path, is_file)?",
      "parentUuid": "6fceeced_1852eed7",
      "range": {
        "startLine": 76,
        "startChar": 0,
        "endLine": 84,
        "endChar": 1
      },
      "revId": "3266bf518d622ca3224fd7296e9c2ed0f7103173",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f50859ab_64300b05",
        "filename": "adb_utils.cpp",
        "patchSetId": 3
      },
      "lineNbr": 84,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2022-04-25T21:24:17Z",
      "side": 1,
      "message": "personally, since it seems like you don\u0027t actually _mean_ \"file\" (and don\u0027t have any other callers yet) it\u0027s probably not worth getting into this business (and whether there\u0027s a missing S_ISREG() here) --- just use access(F_OK) instead?\n\nif that\u0027s not available on Windows (i have no idea), then we\u0027ll probably want to refactor https://source.corp.google.com/android/system/libbase/file.cpp;l\u003d365;bpv\u003d0;bpt\u003d1 so that the file-existence check in there (which already has cruft for \"Windows vs the world\") can be reused here.",
      "parentUuid": "25db4e9f_6fbd974b",
      "range": {
        "startLine": 76,
        "startChar": 0,
        "endLine": 84,
        "endChar": 1
      },
      "revId": "3266bf518d622ca3224fd7296e9c2ed0f7103173",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "17ceaf42_6faa12df",
        "filename": "adb_utils.cpp",
        "patchSetId": 3
      },
      "lineNbr": 84,
      "author": {
        "id": 1943050
      },
      "writtenOn": "2022-04-25T21:53:06Z",
      "side": 1,
      "message": "for what file_exists is used for currently the access(F_OK) should not be used because if the user can not access that folder access(F_OK) will return false, but we want to enforce that if that file exists at that location at all then --one-device is required. As for S_ISREG i can add that if it is necessary.",
      "parentUuid": "f50859ab_64300b05",
      "range": {
        "startLine": 76,
        "startChar": 0,
        "endLine": 84,
        "endChar": 1
      },
      "revId": "3266bf518d622ca3224fd7296e9c2ed0f7103173",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d4e1f27f_f3241f71",
        "filename": "adb_utils.cpp",
        "patchSetId": 3
      },
      "lineNbr": 84,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2022-04-25T22:06:25Z",
      "side": 1,
      "message": "i don\u0027t think stat() and access() behave any differently in that regard? they should both fail with EACCES in that case? (note this is F_OK, not R_OK...)",
      "parentUuid": "17ceaf42_6faa12df",
      "range": {
        "startLine": 76,
        "startChar": 0,
        "endLine": 84,
        "endChar": 1
      },
      "revId": "3266bf518d622ca3224fd7296e9c2ed0f7103173",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f1b8a985_ca0a7f19",
        "filename": "adb_utils.cpp",
        "patchSetId": 3
      },
      "lineNbr": 84,
      "author": {
        "id": 1943050
      },
      "writtenOn": "2022-04-25T23:02:07Z",
      "side": 1,
      "message": "i was wrong ACCESS does the same as STAT, but there isnt much difference between the 2 for what this method does, im fine with using either really as long as it works. so the question becomes use stat so it is the same as directory_exists or change it to use Access?",
      "parentUuid": "d4e1f27f_f3241f71",
      "range": {
        "startLine": 76,
        "startChar": 0,
        "endLine": 84,
        "endChar": 1
      },
      "revId": "3266bf518d622ca3224fd7296e9c2ed0f7103173",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1cec9e44_94783a8f",
        "filename": "adb_utils.cpp",
        "patchSetId": 3
      },
      "lineNbr": 84,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2022-04-25T23:40:37Z",
      "side": 1,
      "message": "my suggestion is just remove all of this stuff we don\u0027t actually need and just say `if (access(\"/etc/foo\", F_OK) \u003d\u003d 0)` directly instead. given that the body of the if is the error message, we\u0027re already about as self-documenting as possible, and spreading the code around multiple functions in multiple files _harms_ readability rather than helping.",
      "parentUuid": "f1b8a985_ca0a7f19",
      "range": {
        "startLine": 76,
        "startChar": 0,
        "endLine": 84,
        "endChar": 1
      },
      "revId": "3266bf518d622ca3224fd7296e9c2ed0f7103173",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}