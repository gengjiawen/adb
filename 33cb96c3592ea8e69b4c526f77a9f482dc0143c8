{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "9c9ba6db_b08ffc5f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1079148
      },
      "writtenOn": "2021-03-31T21:49:56Z",
      "side": 1,
      "message": "Instead of doing this for just mdns, can we do it for all tcp connections? We could change connect_device to spawn a thread internally and return its result via future (or a pollable fd? It might be worth doing this so that we can connect to multiple mdns devices at once instead of going through them serially?)",
      "revId": "33cb96c3592ea8e69b4c526f77a9f482dc0143c8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e9ed949a_5b0beb13",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1128973
      },
      "writtenOn": "2021-04-06T16:48:20Z",
      "side": 1,
      "message": "I agree, implementing it in connect_device is better.\n\nAs for the current serial implementation, I was worried about the case where there are many auto-connectable devices available at once. If we go with the thread approach, we could be spawning a lot of threads at once. WDYT jmgao?",
      "parentUuid": "9c9ba6db_b08ffc5f",
      "revId": "33cb96c3592ea8e69b4c526f77a9f482dc0143c8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "144afc7d_8c49caaa",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1079148
      },
      "writtenOn": "2021-04-09T01:27:04Z",
      "side": 1,
      "message": "Yeah, if we\u0027re expecting to connect to a hundred devices at a time, then spawning a thread for each might not be a great idea.\n\nLooking at the callers of connect_device, there\u0027s one in services.cpp that\u0027s already on its own thread, and then the two mdns ones. I think the easiest thing to do would be to just move your thread up one layer and have it serve all connect_devices instead of just mdns requests, and have connect_device return a future so that the connect service can block on it.",
      "parentUuid": "e9ed949a_5b0beb13",
      "revId": "33cb96c3592ea8e69b4c526f77a9f482dc0143c8",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}