{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "32f54628_6b33c9a4",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 7,
      "author": {
        "id": 1083168
      },
      "writtenOn": "2022-12-09T17:01:29Z",
      "side": 1,
      "message": "nit: Add host:connect delegate via sub-command",
      "range": {
        "startLine": 7,
        "startChar": 0,
        "endLine": 7,
        "endChar": 30
      },
      "revId": "f602dcd422d4f9d939560830e615fe755d08ec51",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "78a1d7b5_9227b963",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 9,
      "author": {
        "id": 1083168
      },
      "writtenOn": "2022-12-09T17:01:29Z",
      "side": 1,
      "message": "nit: \n\nThe new remote in `host:connect:\u003cremote\u003e` connects to `adbd` via a provided sub-command. \n\nAll IO are performed via stdin and stdout of the sub-command.",
      "range": {
        "startLine": 9,
        "startChar": 8,
        "endLine": 9,
        "endChar": 34
      },
      "revId": "f602dcd422d4f9d939560830e615fe755d08ec51",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "07a109fd_ae6dbc1f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1069219
      },
      "writtenOn": "2022-12-09T05:08:23Z",
      "side": 1,
      "message": "Thank you for reviewing!\nPTAL",
      "revId": "f602dcd422d4f9d939560830e615fe755d08ec51",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "cc937a47_479c878c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1069219
      },
      "writtenOn": "2022-12-15T07:32:08Z",
      "side": 1,
      "message": "Thank you for reviewing!\n\nI came up with a question regarding the security model of ADB.\nPlease see my commment in client/commandline.cpp.",
      "revId": "f602dcd422d4f9d939560830e615fe755d08ec51",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "71001d2b_4b1adf43",
        "filename": "client/command_connection.h",
        "patchSetId": 4
      },
      "lineNbr": 1,
      "author": {
        "id": 1083168
      },
      "writtenOn": "2022-12-09T17:01:29Z",
      "side": 1,
      "message": "This runs on adb server so I don\u0027t think it should be in the `client` folder.",
      "range": {
        "startLine": 1,
        "startChar": 0,
        "endLine": 1,
        "endChar": 1
      },
      "revId": "f602dcd422d4f9d939560830e615fe755d08ec51",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ac487295_038e531c",
        "filename": "client/command_connection.h",
        "patchSetId": 4
      },
      "lineNbr": 1,
      "author": {
        "id": 1069219
      },
      "writtenOn": "2022-12-15T07:32:08Z",
      "side": 1,
      "message": "pacakges/modules/adb/README.md says the client and the server are contained in the same executable, and looking at Android.bp, libadb_host and adb are built using code under client/.\n\nIIUC client/ is where we put the server code (e.g. usb_linux.cpp)",
      "parentUuid": "71001d2b_4b1adf43",
      "range": {
        "startLine": 1,
        "startChar": 0,
        "endLine": 1,
        "endChar": 1
      },
      "revId": "f602dcd422d4f9d939560830e615fe755d08ec51",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9b7939af_8acb5dbb",
        "filename": "client/command_connection.h",
        "patchSetId": 4
      },
      "lineNbr": 1,
      "author": {
        "id": 1083168
      },
      "writtenOn": "2022-12-15T20:02:44Z",
      "side": 1,
      "message": "You are right. Please disregard.",
      "parentUuid": "ac487295_038e531c",
      "range": {
        "startLine": 1,
        "startChar": 0,
        "endLine": 1,
        "endChar": 1
      },
      "revId": "f602dcd422d4f9d939560830e615fe755d08ec51",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dae33e02_f768a350",
        "filename": "client/command_connection.h",
        "patchSetId": 4
      },
      "lineNbr": 21,
      "author": {
        "id": 1083168
      },
      "writtenOn": "2022-12-09T17:01:29Z",
      "side": 1,
      "message": "This header method needs a command. I suggest:\n\n```\n// Handle remote connection in `host:connect:\u003cremote\u003e`. Connects to `adbd` via a provided sub-command. \n// All IO are performed via stdin and stdout of the sub-command.\n```",
      "range": {
        "startLine": 21,
        "startChar": 0,
        "endLine": 21,
        "endChar": 20
      },
      "revId": "f602dcd422d4f9d939560830e615fe755d08ec51",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "90c4c19f_c0a79128",
        "filename": "client/commandline.cpp",
        "patchSetId": 4
      },
      "lineNbr": 119,
      "author": {
        "id": 1083168
      },
      "writtenOn": "2022-12-09T17:01:29Z",
      "side": 1,
      "message": "Do you mean `ADB server`?",
      "range": {
        "startLine": 119,
        "startChar": 20,
        "endLine": 119,
        "endChar": 23
      },
      "revId": "f602dcd422d4f9d939560830e615fe755d08ec51",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4fab993c_6cbd8274",
        "filename": "client/commandline.cpp",
        "patchSetId": 4
      },
      "lineNbr": 119,
      "author": {
        "id": 1069219
      },
      "writtenOn": "2022-12-15T07:32:08Z",
      "side": 1,
      "message": "That\u0027s correct, and after a bit of thought I started to think this may not be a good idea in terms of security.\nThis may allow security exploits by executing arbitrary commands requested by any process which can connect to ADB\u0027s TCP port.\n\nWhat is the security model of ADB?\nIf it\u0027s too risky, I\u0027ll abandon this CL and try a different approach.",
      "parentUuid": "90c4c19f_c0a79128",
      "range": {
        "startLine": 119,
        "startChar": 20,
        "endLine": 119,
        "endChar": 23
      },
      "revId": "f602dcd422d4f9d939560830e615fe755d08ec51",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cd30b92b_ff0a4cd8",
        "filename": "client/commandline.cpp",
        "patchSetId": 4
      },
      "lineNbr": 119,
      "author": {
        "id": 1083168
      },
      "writtenOn": "2022-12-15T20:02:44Z",
      "side": 1,
      "message": "Can you details the vulnerability you are thinking of?",
      "parentUuid": "4fab993c_6cbd8274",
      "range": {
        "startLine": 119,
        "startChar": 20,
        "endLine": 119,
        "endChar": 23
      },
      "revId": "f602dcd422d4f9d939560830e615fe755d08ec51",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "794cfe74_a8f30077",
        "filename": "client/commandline.cpp",
        "patchSetId": 4
      },
      "lineNbr": 119,
      "author": {
        "id": 1069219
      },
      "writtenOn": "2022-12-16T10:41:59Z",
      "side": 1,
      "message": "What I\u0027m thinking of is:\n 1. User A and B share the same desktop computer.\n 2. User A starts an ADB server on the computer. It runs with User A\u0027s UID.\n 3. User B uses the same computer via SSH.\n 4. User B launches a process which connects to the ADB server\u0027s TCP port, and sends a command to the ADB server process. [ \u003c\u003d I\u0027m not sure if this is allowed in the current security model of ADB. Is it?]\n 5. The ADB server process executes the command requested by User B as User A. This allows User B to do anything as User A (e.g. browsing User A\u0027s private data, or performing network IO as User A).\n \nAnother possible exploit is:\n 1. User A starts an ADB server.\n 2. User A runs Chrome and for some reason accesses a malicious web site.\n 3. The malicious web site compromises the renderer process of Chrome using some kind of vulnerability in the JavaScript engine. Now the malicious web site can execute any code as the renderer process.\n 4. Chrome\u0027s renderer process runs in a sandbox, it cannot execute arbitrary commands even if compromised. However, it can connect to the ADB server\u0027s TCP port instead. [ \u003c\u003d Is this possible with the current security model of ADB?]\n 5. The malicious web site executes arbitrary command through the ADB server process to escape the sandbox.",
      "parentUuid": "cd30b92b_ff0a4cd8",
      "range": {
        "startLine": 119,
        "startChar": 20,
        "endLine": 119,
        "endChar": 23
      },
      "revId": "f602dcd422d4f9d939560830e615fe755d08ec51",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e4b4d323_13b49950",
        "filename": "client/commandline.cpp",
        "patchSetId": 4
      },
      "lineNbr": 122,
      "author": {
        "id": 1083168
      },
      "writtenOn": "2022-12-09T17:01:29Z",
      "side": 1,
      "message": "Sorry I did not catch this earlier. We intend to move away from this super verbose `--help` output to a man page. For now please also update `packages/modules/adb/docs/user/adb.1.md` with the same explanation.",
      "range": {
        "startLine": 110,
        "startChar": 0,
        "endLine": 122,
        "endChar": 53
      },
      "revId": "f602dcd422d4f9d939560830e615fe755d08ec51",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}